<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Newsletter Archive – Aerospace Quality Brief</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

<header class="lri-topbar">
  <div class="lri-topbar-inner">
    <div class="lri-topbar-left">
      <img src="/assets/img/LRI LOGO.jpeg" alt="Lunar Research Initiative seal" class="lri-seal">
    </div>
    <nav class="lri-topnav">
      <a href="/">Home</a>
      <a href="/about/">About</a>
      <a href="/research/">Research</a>
      <a href="/initiatives/">Initiatives</a>
      <a href="/standards/">Standards</a>
      <a href="/publications/">Publications</a>
      <a href="/newsletter/">Newsletter</a>
      <a href="/newsletter/archive/">Archive</a>
      <a href="/partnerships/">Partnerships</a>
      <a href="/contact/">Contact</a>
    </nav>
  </div>
</header>

<main>

  <section class="lri-section">
    <div class="lri-section-inner">
      <h1 class="lri-section-title">Newsletter Archive</h1>
      <p class="lri-section-text">
        Browse all past editions of Aerospace Quality Brief, organized by release date. Each article
        focuses on practical tools that improve cost, speed, and compliance in aerospace and lunar
        manufacturing.
      </p>

      <div class="archive-toolbar">
        <span class="archive-pill">Cost · Speed · Compliance</span>
        <a class="primary-button"
           href="https://www.linkedin.com/newsletters/aerospace-quality-brief-7402028860193796097/"
           target="_blank" rel="noopener">
          Subscribe on LinkedIn
        </a>
      </div>
    </div>
  </section>

  <section class="lri-section">
    <div class="lri-section-inner">
      <div id="archive-grid" class="archive-grid">
        <!-- Cards will be injected here by JavaScript -->
      </div>
    </div>
  </section>

</main>

<footer class="lri-footer">
  <p>© 2025 Lunar Research Initiative. All rights reserved.</p>
</footer>

<script>
  // Load newsletter archive data from JSON and render cards
  document.addEventListener('DOMContentLoaded', function () {
    fetch('archive-data.json')
      .then(function (response) {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(function (data) {
        renderArchiveCards(data);
      })
      .catch(function (error) {
        console.error('Error loading archive-data.json:', error);
        const grid = document.getElementById('archive-grid');
        grid.innerHTML = '<p>Unable to load newsletter archive at this time.</p>';
      });
  });

  function renderArchiveCards(editions) {
    const grid = document.getElementById('archive-grid');
    grid.innerHTML = '';

    // Sort editions by edition number descending (newest first)
    editions.sort(function (a, b) {
      return parseInt(b.edition, 10) - parseInt(a.edition, 10);
    });

    editions.forEach(function (item) {
      const card = document.createElement('article');
      card.className = 'archive-card';

      const title = document.createElement('h4');
      title.textContent = item.title;
      card.appendChild(title);

      const meta = document.createElement('p');
      meta.className = 'archive-meta';
      meta.textContent = 'Edition ' + item.edition + ' · ' + item.tags;
      card.appendChild(meta);

      const summary = document.createElement('p');
      summary.className = 'archive-summary';
      summary.textContent = item.summary;
      card.appendChild(summary);

      const link = document.createElement('a');
      link.className = 'archive-link';

      if (item.status === 'live' && item.url) {
        link.href = item.url;
        link.target = '_blank';
        link.rel = 'noopener';
        link.textContent = 'Read this edition on LinkedIn';
      } else {
        link.href = '#';
        link.textContent = 'LinkedIn link coming soon';
      }

      card.appendChild(link);
      grid.appendChild(card);
    });
  }
</script>

</body>
</html>
